# Overpass | TryHackMe

## 1) Nmap Servis Taraması

Hedef sistemde açık portları tespit etmek için `nmap` taraması gerçekleştirilmiştir.

![Nmap](https://github.com/ozcanpng/ozcanpng.github.io/blob/main/images/Nmap.png)

---

## 2) Dirsearch ile Dizin Keşfi

Port 80 üzerinde çalışan HTTP servisine yönelik dizin keşfi yapılmış ve bazı önemli yollar bulunmuştur.

![Dirsearch](https://github.com/ozcanpng/ozcanpng.github.io/blob/main/images/Dirsearch.png)

---

## 3) Admin Giriş Paneli

Tarama sonucu `/admin` paneline ulaşılmıştır. Panel kullanıcı adı ve parola ile giriş korumalıdır.

---

## 4) JavaScript Analizi

main.js dosyasında `SessionToken` cookie’si set edildiğinde kullanıcı doğrulaması yapılmadan admin paneline erişim sağlanabildiği tespit edilmiştir.

![JS Analizi](https://github.com/ozcanpng/ozcanpng.github.io/blob/main/images/LoginBypassMethod.png)

---

## 5) Cookie ile Giriş Bypass

Tarayıcı konsolundan `SessionToken` cookie'si set edilerek yetkisiz giriş sağlanmıştır.

![Cookie Bypass](https://github.com/ozcanpng/ozcanpng.github.io/blob/main/images/LoginPanelCookieSet.png)

---

## 6) SSH Anahtarının Ele Geçirilmesi

Admin panelinde James'e ait parolayla şifrelenmiş bir SSH private key paylaşılmıştır ve Anahtarın AES-128-CBC ile şifrelendiği bilgisi yer almaktadır..

![SSH Key](https://github.com/ozcanpng/ozcanpng.github.io/blob/main/images/sshKey.png)

---

## 7) ssh2john.py ile Hash’e Çevirme

SSH anahtarı `ssh2john.py` scripti ile John the Ripper için hash formatına dönüştürülmüştür.

![Hash Formatına Çevirme](https://github.com/ozcanpng/ozcanpng.github.io/blob/main/images/sshKeyToHashTxt.png)

---

## 8) John the Ripper ile Kırma

Rockyou wordlist'i kullanılarak parola başarılı şekilde kırılmıştır: `james13`

![Hash Crack](https://github.com/ozcanpng/ozcanpng.github.io/blob/main/images/HashCracked.png)

---

## 9) SSH ile Bağlantı

Parola ile birlikte özel anahtar kullanılarak James kullanıcısı ile sunucuya SSH bağlantısı sağlanmıştır.

![SSH Giriş](https://github.com/ozcanpng/ozcanpng.github.io/blob/main/images/successToLogin.png)

---

## 10) User Flag

James kullanıcısının ev dizininde `user.txt` dosyası bulunmuştur.

```txt
thm{65c1aaf000506e56996822c6281e6bf7}
```

![User Flag](https://github.com/ozcanpng/ozcanpng.github.io/blob/main/images/userFlag.png)

---

## 11) Crontab Analizi

Crontab'lara baktığımızda root yetkisinde her dakika çalışan bir komut olduğunu görüyoruz.

```python
* * * * * root curl overpass.thm/downloads/src/buildscript.sh | bash
```

---

## 12) Hostname ve Alan Adı Bilgisi

Sonrasında `/etc/hosts` dosyası incelenerek hedef sistemin iç domain ismi öğreniyoruz: `overpass.thm`

Bu noktada `Privilege Escalation` yapabilmemizin yolu bu komuta bir şekilde müdahalede bulunmak.

![Crontab Keşfi](https://github.com/ozcanpng/ozcanpng.github.io/blob/main/images/Crontab.png)

---

## 13) İstek Yönlendirme

`/etc/hosts`'un `james` tarafından yazılabilir olduğunu anlıyoruz. Bu noktada istediği kendi ip adresimize yönlendirerek zararlı yazılımı tetiklemeyi amaçlıyoruz.

![](https://github.com/ozcanpng/ozcanpng.github.io/blob/main/images/privEscTactics.png)
 
HTTP sunucusu başlatılarak hedefin dosya isteği yapması sağlanmıştır. Bu sayede potansiyel bir dosya çalıştırma veya planlanmış task istismarı hazırlığı yapılmıştır.

![](https://github.com/ozcanpng/ozcanpng.github.io/blob/main/images/rootListener.png)

---

## 14) Root Shell Elde Edilmesi

1 dakikanın sonunda root haklarıyla reverse shell bağlantısı elde edilmiştir.

![Root Shell](https://github.com/ozcanpng/ozcanpng.github.io/blob/main/images/rootFlag.png)

---

## 15) Root Bayrağı

Root yetkisiyle `root.txt` dosyası okunarak son bayrak elde edilmiştir.

```txt
thm{7f336f8c359dbac18d54fdd64ea753bb}
```

---

Tüm adımlar başarıyla tamamlanmış ve hedef sistemin tam kontrolü sağlanmıştır.
